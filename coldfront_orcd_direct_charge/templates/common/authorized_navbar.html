{% include 'common/navbar_brand.html' %}
{% load common_tags %}

<nav class="navbar navbar-expand-md navbar-dark bg-primary">
  <div class="container">
    <a class="navbar-brand d-block d-sm-none text-primary" href="#">ColdFront</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-main">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="navbar-collapse collapse" id="navbar-main">
      <ul class="navbar-nav">
        <li id="navbar-home" class="nav-item active">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li id="navbar-current-rates" class="nav-item">
          <a class="nav-link" href="{% url 'coldfront_orcd_direct_charge:current-rates' %}">
            <i class="fas fa-tags"></i> Rates
          </a>
        </li>
        {% if settings.CENTER_SUMMARY_ENABLE %}
        <li id="navbar-center-summary" class="nav-item">
          <a class="nav-link" href="{% url 'center-summary' %}">Center Summary</a>
        </li>
        {% endif %}
        <li id="navbar-project-menu" class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">Project</a>
          <div class="dropdown-menu">
            <a id="navbar-project" class="dropdown-item" href="{% url 'project-list' %}">Projects</a>
            <a id="navbar-my-reservations" class="dropdown-item" href="{% url 'coldfront_orcd_direct_charge:my-reservations' %}">My Reservations</a>
            {% if perms.coldfront_orcd_direct_charge.can_manage_rentals or perms.coldfront_orcd_direct_charge.can_manage_billing or perms.coldfront_orcd_direct_charge.can_manage_rates %}
              <div class="dropdown-divider"></div>
              <h6 class="dropdown-header">Admin Functions</h6>
              {% if perms.coldfront_orcd_direct_charge.can_manage_rentals %}
                <a id="navbar-manage-rentals" class="dropdown-item" href="{% url 'coldfront_orcd_direct_charge:rental-manager' %}">Manage Rentals</a>
              {% endif %}
              {% if perms.coldfront_orcd_direct_charge.can_manage_billing %}
                <a id="navbar-manage-billing" class="dropdown-item" href="{% url 'coldfront_orcd_direct_charge:pending-cost-allocations' %}">Manage Billing</a>
              {% endif %}
              {% if perms.coldfront_orcd_direct_charge.can_manage_rates %}
                <a id="navbar-manage-rates" class="dropdown-item" href="{% url 'coldfront_orcd_direct_charge:rate-management' %}">
                  <i class="fas fa-dollar-sign fa-fw mr-1"></i> Manage Rates
                </a>
              {% endif %}
              <a id="navbar-activity-log" class="dropdown-item" href="{% url 'coldfront_orcd_direct_charge:activity-log' %}">Activity Log</a>
            {% endif %}
          </div>
        </li>
        {% if request.user.is_superuser %}
          {% include 'common/navbar_admin.html' %}
        {% elif request.user.is_staff %}
          {% include 'common/navbar_nonadmin_staff.html' %}
        {% elif perms.project.can_review_pending_project_reviews or perms.grant.can_view_all_grants %}
          {% include 'common/navbar_director.html' %}
        {% endif %}
        {% if request.user.is_superuser or perms.allocation.can_manage_invoice %}
          {% include 'common/navbar_invoice.html' %}
        {% endif %}
        {% if settings.CENTER_HELP_URL %}
          {% include 'common/navbar_help.html' %}
        {% endif %}
      </ul>
      <ul class="navbar-nav ml-auto">
        {% include 'common/navbar_login.html' %}
      </ul>
    </div>
  </div>
</nav>

