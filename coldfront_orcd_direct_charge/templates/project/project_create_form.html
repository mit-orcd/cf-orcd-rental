{% extends "common/base.html" %}
{% load crispy_forms_tags %}
{% load static %}


{% block title %}
Create Project
{% endblock %}


{% block content %}
<form method="post">
  {% csrf_token %}
  {# Use default field_of_science (149 = "Other") since we removed the dropdown #}
  <input type="hidden" name="field_of_science" value="149">
  {# Render only title and description fields #}
  <div class="form-group">
    <label for="id_title">Title<span class="text-danger">*</span></label>
    <input type="text" name="title" id="id_title" class="form-control" 
           value="{{ form.title.value|default:"" }}" maxlength="255" required>
    {% if form.title.errors %}
      <div class="text-danger">{{ form.title.errors }}</div>
    {% endif %}
  </div>
  
  <div class="form-group">
    <label for="id_description">Description<span class="text-danger">*</span></label>
    <textarea name="description" id="id_description" class="form-control" rows="4"
              placeholder="Briefly describe the purpose of this project...">{{ form.description.value|default:"" }}</textarea>
    {% if form.description.errors %}
      <div class="text-danger">{{ form.description.errors }}</div>
    {% endif %}
  </div>
  
  <input class="btn btn-primary" type="submit" value="Save" />
  <a class="btn btn-secondary" href="{% url 'project-list' %}" role="button">Cancel</a>
</form>

<script>
  $(document).ready(function() {
    // Clear the default description text if it contains the boilerplate
    var descField = document.getElementById('id_description');
    if (descField && descField.value.includes('We do not have information')) {
      descField.value = '';
    }
  });
</script>
{% endblock %}
